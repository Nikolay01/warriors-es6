!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){r(1),e.exports=r(2)},function(e,t,r){"use strict";r.r(t);var n=(()=>{return{Unit:class{constructor(e,t,r,n){this.type=e,this.health=this.defaultHealth=t,this.damage=r,this.distance=n,this.level=0}isReadyToFight(){return this.health>0}restore(){this.health=this.defaultHealth}prepareForAttack(){return this.damage}attackedBy(e){this.health-=e.prepareForAttack()}render(){const e=document.createElement("div");e.classList.add("unit");const t=document.createElement("header"),r=document.createElement("section"),n=document.createElement("span"),s=document.createElement("span"),a=document.createElement("span"),o=document.createElement("span"),i=document.createElement("footer"),h=document.createElement("button");t.innerHTML=this.type,n.innerHTML=`Health: ${this.health}`,s.innerHTML=`Damage: ${this.damage}`,a.innerHTML=`Distance: ${this.distance}`,i.innerHTML=`Level: ${this.level}`,h.innerHTML="Restore health";const d=document.getElementById("warZone");e.appendChild(t),r.appendChild(n),r.appendChild(s),r.appendChild(a),r.appendChild(o),e.appendChild(r),e.appendChild(i),i.appendChild(h),d.appendChild(e);const l=this;function c(){l.health-=100,n.innerHTML=`Health: ${l.health-=100}`}function u(){l.health=l.defaultHealth,n.innerHTML=`Health: ${l.health}`}e.addEventListener("click",c),e.addEventListener("click",()=>{l.health<=0&&e.removeEventListener("click",c)}),h.addEventListener("click",t=>{t.stopPropagation(),u(),e.addEventListener("click",c)});const p=document.getElementById("restoreAll");return p&&p.addEventListener("click",()=>{u(),e.addEventListener("click",c)}),e}}}})();var s=(()=>{return{Archer:class extends n.Unit{constructor(e,t,r){super("Archer",e||200,t||300,r||500),this.arrows=10}prepareForAttack(){return this.reload(),n.Unit.prototype.prepareForAttack.call(this)}reload(){if(!this.arrows)throw"There are no arrow!";this.arrows--}}}})();var a=(()=>{return{Warrior:class extends n.Unit{constructor(e,t,r){super("Warrior",e||200,t||300,r||500)}}}})();var o=function(){return{Mage:class extends n.Unit{constructor(e,t,r){super("Mage",e||200,t||300,r||500)}}}}();var i=function(){return{Knight:class extends n.Unit{constructor(e,t,r){super("Knight",e||200,t||300,r||500)}}}}();var h=(()=>{return{Squad:class{constructor(e){this.name=e,this.team=[]}addUnit(e){if(!(e instanceof n.Unit))throw new Error("Not a unit");this.team.push(e)}getUnit(e){if(isNaN(e)||e<0)throw new Error("Index not a number or less than 0");if(e<this.team.length)return this.team[e];throw new Error(`In this squad ${this.team.length} units`)}removeUnit(e){if(isNaN(e)||e<0)throw new Error("Index not a number or less than 0");if(!(e<this.team.length))throw new Error(`In this squad ${this.team.length} units`);this.team.splice(e,1)}shuffle(){for(var e=this.team.length,t=this.team;e>0;){const r=Math.floor(Math.random()*e),n=t[--e];t[e]=t[r],t[r]=n}return t}}}})();var d=(()=>{return{Battleground:class{constructor(){this.onField=[]}addSquad(e){if(!(e instanceof h.Squad))throw new Error("Not a squad");this.onField.length<2?this.onField.push(e):console.warn("You can't add more than 2 squads on field")}fight(){const e=this.onField;!function t(){const r=e[0].team,n=e[1].team;r.forEach((r,s,a)=>{n.forEach((n,o,i)=>{r.health>0?(n.attackedBy(r),console.log(`${r.type}(1) attacked ${n.type}(2)`),console.log(`${n.type}(2) health ${n.health}`),console.log(`${r.type}(1) health ${r.health}`)):r.health<=0&&i.length>0&&a.splice(s,1),n.health>0&&r.length>0?(r.attackedBy(n),console.log(`${n.type}(2) attacked ${r.type}(1)`),console.log(`${r.type}(1) health ${r.health}`),console.log(`${n.type}(2) health ${n.health}`)):n.health<=0&&a.length>0&&i.splice(o,1),a.length>=1&&i.length>=1?t():a.length>=1?console.log(`${e[0].name} wins`):console.log(`${e[1].name} wins`)})})}()}removeSquad(e){if(isNaN(e)||e<0)throw new Error("Index not a number or less than 0");if(!(e<this.onField.length))throw new Error(`There are ${this.onField.length} squads on battleground`);this.onField.splice(e,1)}addRestoreAllButton(e){const t=document.createElement("button");t.id="restoreAll",t.innerHTML="Restore all",e.appendChild(t)}renderAll(e){this.onField.forEach(t=>{t.team.forEach(t=>{e.appendChild(t.render())})})}}}})();var l=(()=>{return{Card:class{constructor(e,t,r){this.width=e||200,this.gridID=document.getElementById(r||"warZone"),this.gridItemClass=document.getElementsByClassName(t||"unit"),this.gridArray=[],this.pushedCards=[],this.flag=!1}setWidth(){for(let e=0;e<this.gridItemClass.length;e++)this.gridItemClass[e].style.position="absolute",this.gridItemClass[e].style.width=`${this.width}px`}pushCardToArray(){for(let e=0;e<this.gridItemClass.length;e++)this.gridArray.push(this.gridItemClass[e]);return this.gridArray}clearArrayPushCard(){this.pushedCards.length=0,this.pushedCards=this.pushCardToArray()}generateGrid(){this.setWidth(),!1===this.flag&&this.clearArrayPushCard();const e=this;function t(){const t=Math.floor(e.gridID.offsetWidth/e.gridItemClass[0].offsetWidth);if(t>0){let r=function(e,t){const r=[];let n;for(n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}(e.pushedCards,t);r.forEach((e,t)=>{e.forEach((e,r)=>{e.classList.add(`row_${t}_col_${r}`),e.style.top=`${t*e.offsetHeight}px`,e.style.left=`${r*e.offsetWidth}px`})}),e.gridID.style.height=`${r.length*e.gridItemClass[0].offsetHeight-10}px`}}t(),window.addEventListener("resize",function(e,t){let r;return function(){const n=this,s=arguments;clearTimeout(r),r=setTimeout(()=>{r=null,e.apply(n,s)},t)}}(t,200))}moveFromTo(e,t){this.flag=!0;const r=this;function n(){if(!isNaN(e)&&e<r.pushedCards.length&&e>=0&&!isNaN(t)&&t<r.pushedCards.length&&t>=0){const n=r.pushedCards.splice(e,1),s=r.pushedCards.splice(t,1,n[0]);return r.pushedCards.splice(e,0,s[0]),r.pushedCards}throw new Error("Incorrect Index")}n()?this.pushedCards=n():(this.pushedCards.length=0,this.pushedCards=this.pushCardToArray()),n(),this.generateGrid()}}}})();const c=new s.Archer(500,350,400),u=new s.Archer(550,320,420),p=new s.Archer(520,300,450),m=new a.Warrior(650,350,250),f=new a.Warrior(750,350,250),g=new o.Mage(450,500,150),w=new o.Mage(450,450,150),y=new i.Knight(800,400,200),C=new h.Squad("Bobby");C.addUnit(c),C.addUnit(m),C.addUnit(p),C.addUnit(w);const v=new h.Squad("Johny");v.addUnit(g),v.addUnit(y),v.addUnit(u),v.addUnit(f);const E=new d.Battleground;E.addSquad(C),E.addSquad(v),E.addRestoreAllButton(bodyWrap),E.renderAll(warZone);const $=new l.Card(210,"unit","warZone");$.generateGrid(),setTimeout(()=>{$.moveFromTo(1,2)},500),setTimeout(()=>{$.moveFromTo(1,5)},1500),setTimeout(()=>{$.moveFromTo(4,0)},2500),setTimeout(()=>{$.moveFromTo(6,3)},3500)},function(e,t){}]);